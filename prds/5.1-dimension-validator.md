# PRD 5.1: Dimension Validator

## Overview
Validate image dimensions against spec requirements.

## Deliverables
- `src/validation/dimension-validator.ts`

## Interface

```typescript
export interface DimensionCheckResult {
  passed: boolean;
  width: number;
  height: number;
  longEdge: number;
  shortEdge: number;
  failures: DimensionFailure[];
}

export interface DimensionFailure {
  check: 'min_long_edge' | 'max_long_edge' | 'min_short_edge' | 'max_short_edge' | 'exact';
  expected: number;
  actual: number;
  severity: Severity;
}

export function validateDimensions(
  exif: ExifData,
  spec: ProjectSpec['dimensions']
): DimensionCheckResult;
```

## Validation Logic

```typescript
function validateDimensions(exif, spec) {
  const width = exif.ImageWidth;
  const height = exif.ImageHeight;
  const longEdge = Math.max(width, height);
  const shortEdge = Math.min(width, height);
  const failures = [];

  if (spec.min_long_edge && longEdge < spec.min_long_edge) {
    failures.push({
      check: 'min_long_edge',
      expected: spec.min_long_edge,
      actual: longEdge,
      severity: 'critical' // can't upscale
    });
  }

  if (spec.max_long_edge && longEdge > spec.max_long_edge) {
    failures.push({
      check: 'max_long_edge',
      expected: spec.max_long_edge,
      actual: longEdge,
      severity: 'fixable' // can downscale
    });
  }

  // ... similar for short edge

  return { passed: failures.length === 0, width, height, longEdge, shortEdge, failures };
}
```

## Severity Classification

- `min_*` failures → **critical** (requires re-scan)
- `max_*` failures → **fixable** (can resize down)
- `exact_dimensions` → **critical** (must match exactly)

## Edge Cases

- Missing width/height → critical error
- Non-integer dimensions → warning
- Width = Height → both edges same

## Success Criteria
- [ ] Check all dimension constraints
- [ ] Correct severity classification
- [ ] Handle missing EXIF dimensions
- [ ] Unit tests for all cases

## Dependencies
- PRD 1.3 (types)

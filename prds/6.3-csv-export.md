# PRD 6.3: CSV Export

## Overview
Export failed images and validation details to CSV for spreadsheet analysis.

## Deliverables
- `src/reporting/csv-export.ts`

## Interface

```typescript
export type CsvExportType = 'failed' | 'all' | 'summary';

export interface CsvOptions {
  outputPath: string;
  type: CsvExportType;
  delimiter?: ',' | '\t' | ';';
  includeHeader?: boolean;
}

export async function exportToCsv(
  db: Database,
  runId: number,
  options: CsvOptions
): Promise<string>;
```

## CSV Formats

### failed_images_v1.csv (type: 'failed')

```csv
filepath,filename,check_type,severity,status,message,expected,actual
/path/IMG_0023.tif,IMG_0023.tif,dimension,critical,fail,Long edge below minimum,7000,6543
/path/IMG_0100.tif,IMG_0100.tif,exif_tag,fixable,fail,Missing required tag: Artist,,
```

### all_images_v1.csv (type: 'all')

```csv
filepath,filename,file_type,file_size,status,dimension_status,color_status,exif_status,jhove_status
/path/IMG_0001.tif,IMG_0001.tif,TIFF,45000000,pass,pass,pass,pass,pass
/path/IMG_0023.tif,IMG_0023.tif,TIFF,42000000,fail,fail,pass,pass,pass
```

### summary_v1.csv (type: 'summary')

```csv
check_type,total,passed,failed,pass_rate
dimension,500,492,8,98.4%
color,500,500,0,100%
exif_tags,500,495,5,99%
jhove,500,500,0,100%
```

## CSV Best Practices

- Proper escaping of commas and quotes
- UTF-8 encoding with BOM (for Excel)
- Consistent date format (ISO 8601)
- No trailing commas

## Success Criteria
- [ ] Valid CSV output
- [ ] Opens correctly in Excel
- [ ] All failure details included
- [ ] Proper escaping
- [ ] <1 second generation

## Dependencies
- PRD 1.2 (database)

# PRD 5.3: EXIF Tag Validator

## Overview
Validate presence and values of required EXIF tags.

## Deliverables
- `src/validation/exif-tag-validator.ts`

## Interface

```typescript
export interface ExifTagCheckResult {
  passed: boolean;
  checkedTags: TagCheckDetail[];
  failures: TagFailure[];
}

export interface TagCheckDetail {
  tag: string;
  present: boolean;
  value?: string;
  expectedValue?: string;
  matches: boolean;
}

export interface TagFailure {
  tag: string;
  reason: 'missing' | 'wrong_value';
  expected?: string;
  actual?: string;
  severity: Severity;
}

export function validateExifTags(
  exif: ExifData,
  requiredTags: RequiredExifTag[]
): ExifTagCheckResult;
```

## Validation Logic

```typescript
for (const req of requiredTags) {
  const value = exif[req.tag];

  if (value === undefined || value === null || value === '') {
    failures.push({
      tag: req.tag,
      reason: 'missing',
      severity: 'fixable' // can add via exiftool
    });
  } else if (req.expected_value) {
    if (!matchValue(value, req.expected_value, req.allow_variations)) {
      failures.push({
        tag: req.tag,
        reason: 'wrong_value',
        expected: req.expected_value,
        actual: String(value),
        severity: 'fixable'
      });
    }
  }
}
```

## Value Matching

### Exact Match (default)
```typescript
String(value).trim() === expected.trim()
```

### With Variations (`allow_variations: true`)
```typescript
// Case-insensitive
// Ignores leading/trailing whitespace
// For cameras: "Sony" matches "SONY CORPORATION"
```

## Common Required Tags

```typescript
const COMMON_TAGS = [
  'Make',           // Camera manufacturer
  'Model',          // Camera model
  'Artist',         // Photographer/technician
  'Copyright',      // Rights holder
  'DateTime',       // Capture/modification date
  'DateTimeOriginal',
  'Software',       // Processing software
  'ImageDescription'
];
```

## Severity

All EXIF tag failures are **fixable** via ExifTool:
```bash
exiftool -Artist="John Doe" image.tif
```

## Success Criteria
- [ ] Check tag presence
- [ ] Check tag values with exact match
- [ ] Support allow_variations
- [ ] Handle all value types (string, number, date)
- [ ] Unit tests

## Dependencies
- PRD 1.3 (types)
